<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="utf-8"/>
    <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover" name="viewport"/>
    <title>K5A8 Memories </title>
    
    <!-- PWA Setup -->
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#87CEEB">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <link rel="apple-touch-icon" href="Images/icon.jpg">

    <!-- Fonts & Icons -->
    <link href="Images/logo.jpg" rel="icon" type="image/jpg"/>
    <link href="https://fonts.googleapis.com/css2?family=Baloo+2:wght@500;700;800&family=Quicksand:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@48,400,0,0" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        :root {
            --primary-color: #00BFFF; /* Deep Sky Blue */
            --accent-color: #ffffff;
            --text-main: #01579B; /* Xanh đậm cho chữ dễ đọc trên nền sáng */
            --text-sub: #0277bd;
            --glass-bg: rgba(255, 255, 255, 0.4);
            --glass-border: rgba(255, 255, 255, 0.8);
            --shadow: 0 10px 30px rgba(135, 206, 235, 0.4); /* Bóng màu xanh nhạt */
            --safe-area-top: env(safe-area-inset-top);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        
        body {
            font-family: 'Quicksand', sans-serif;
            /* Gradient bầu trời */
            background: linear-gradient(180deg, #87CEEB 0%, #E0F7FA 100%);
            color: var(--text-main);
            overflow-x: hidden;
            padding-bottom: 100px;
            min-height: 100vh;
            overscroll-behavior-y: none;
        }
        
        /* --- CLOUDS ANIMATION (CSS Pure) --- */
        .cloud-container {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: -1;
            overflow: hidden;
        }
        
        .cloud {
            position: absolute; background: #fff; border-radius: 100px; opacity: 0.8;
            filter: blur(5px); animation: floatCloud linear infinite;
        }
        .cloud::after, .cloud::before {
            content: ''; position: absolute; background: inherit; border-radius: 50%;
        }
        .cloud::after { width: 40%; height: 100%; top: -60%; left: 30%; }
        .cloud::before { width: 30%; height: 80%; top: -40%; left: 60%; }

        /* Tạo các đám mây với kích thước khác nhau */
        .c1 { width: 120px; height: 40px; top: 10%; left: -150px; animation-duration: 25s; }
        .c2 { width: 180px; height: 60px; top: 25%; left: -200px; animation-duration: 35s; animation-delay: 5s; opacity: 0.6; }
        .c3 { width: 100px; height: 35px; top: 60%; left: -120px; animation-duration: 20s; animation-delay: 2s; }
        .c4 { width: 220px; height: 70px; top: 80%; left: -250px; animation-duration: 40s; animation-delay: 8s; opacity: 0.5; }

        @keyframes floatCloud {
            0% { transform: translateX(0); }
            100% { transform: translateX(120vw); }
        }

        /* --- PARTICLES --- */
        #particles-js {
            position: fixed; width: 100%; height: 100%; top: 0; left: 0; z-index: -1;
        }

        /* --- NAVIGATION --- */
        nav {
            position: fixed; top: 0; width: 100%; z-index: 1000;
            background: rgba(255, 255, 255, 0.7);
            backdrop-filter: blur(15px); -webkit-backdrop-filter: blur(15px);
            border-bottom: 1px solid rgba(255,255,255,0.5);
            padding: 15px 20px;
            padding-top: max(15px, var(--safe-area-top));
            display: flex; justify-content: space-between; align-items: center;
            box-shadow: 0 4px 20px rgba(135, 206, 235, 0.2);
        }

        .nav-logo { 
            font-family: 'Baloo 2', cursive; font-size: 26px; font-weight: 800; 
            color: var(--primary-color);
            text-shadow: 2px 2px 0px #fff;
            display: flex; align-items: center; gap: 5px;
        }
        .nav-logo i { font-size: 20px; }
        
        .menu-toggle { 
            font-size: 26px; color: var(--primary-color); cursor: pointer; 
            width: 45px; height: 45px; display: flex; align-items: center; justify-content: center;
            border-radius: 50%; background: #fff;
            box-shadow: 0 4px 10px rgba(135, 206, 235, 0.3);
            transition: 0.3s;
        }
        .menu-toggle:active { transform: scale(0.9); }

        /* Sidebar Glass (Light Theme) */
        .nav-links {
            position: fixed; top: 0; right: -100%; width: 280px; height: 100vh;
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(30px); -webkit-backdrop-filter: blur(30px);
            display: flex; flex-direction: column; padding-top: 100px; gap: 10px;
            transition: 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            z-index: 999; box-shadow: -10px 0 30px rgba(0,0,0,0.05);
        }
        .nav-links.active { right: 0; }
        
        .nav-links a {
            padding: 15px 25px; margin: 0 15px; border-radius: 15px;
            font-size: 16px; font-weight: 700; color: var(--text-main); text-decoration: none;
            display: flex; align-items: center; gap: 15px;
            transition: 0.3s;
        }
        .nav-links a:hover { background: #E1F5FE; color: var(--primary-color); transform: translateX(5px); }

        .overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(255,255,255,0.5); z-index: 998;
            opacity: 0; visibility: hidden; transition: 0.5s; backdrop-filter: blur(3px);
        }
        .overlay.active { opacity: 1; visibility: visible; }

        /* --- HERO HEADER --- */
        .hero-banner {
            margin-top: 0; height: 40vh; min-height: 350px;
            /* Thêm overlay màu trắng nhẹ để ảnh Hero hòa vào nền trời */
            background: linear-gradient(to bottom, rgba(255,255,255,0) 0%, rgba(224,247,250,1) 100%), url("Web/hero.png") center/cover no-repeat;
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            text-align: center; color: var(--text-main);
            position: relative; overflow: hidden;
            border-bottom-left-radius: 40px; border-bottom-right-radius: 40px;
            box-shadow: 0 10px 30px rgba(135, 206, 235, 0.3);
        }
        
        .hero-title { 
            font-family: 'Baloo 2', cursive; font-size: 65px; font-weight: 800; line-height: 1;
            color: #fff; text-shadow: 0 4px 15px rgba(0, 191, 255, 0.5);
            margin-bottom: 10px; z-index: 2;
            animation: floatHero 3s ease-in-out infinite;
        }
        .hero-subtitle { 
            font-size: 16px; color: var(--text-main); font-weight: 700; letter-spacing: 2px; text-transform: uppercase; 
            padding: 8px 20px; border-radius: 30px;
            background: rgba(255, 255, 255, 0.6); backdrop-filter: blur(5px);
            z-index: 2; box-shadow: 0 4px 15px rgba(0,0,0,0.05);
        }

        @keyframes floatHero {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        /* --- 3D GLASS CARDS (Light Version) --- */
        section { max-width: 650px; margin: 30px auto; padding: 0 20px; perspective: 1000px; }
        
        .glass-card {
            background: var(--glass-bg);
            backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px);
            border: 2px solid #fff; /* Viền trắng nổi bật */
            border-radius: 25px; padding: 30px;
            box-shadow: var(--shadow);
            transform-style: preserve-3d;
            transition: transform 0.1s;
            position: relative; overflow: hidden;
        }

        /* Hiệu ứng Glare sáng hơn */
        .glass-card::before {
            content: ''; position: absolute; top: 0; left: -100%; width: 100%; height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.6), transparent);
            transition: 0.5s; pointer-events: none;
        }
        .glass-card:active::before { left: 100%; transition: 0.5s; }

        h2 { 
            text-align: center; margin-bottom: 25px; font-family: 'Baloo 2', cursive; 
            font-size: 28px; color: var(--text-main); font-weight: 800;
            display: flex; align-items: center; justify-content: center; gap: 10px;
        }
        h2 i { color: var(--primary-color); }

        /* Teacher */
        .teacher-card { text-align: center; background: rgba(255, 255, 255, 0.6); }
        .teacher-img-wrapper {
            width: 130px; height: 130px; margin: 0 auto 20px; position: relative;
        }
        .teacher-img { 
            width: 100%; height: 100%; border-radius: 50%; object-fit: cover; 
            border: 4px solid #fff;
            box-shadow: 0 8px 20px rgba(0, 191, 255, 0.2);
        }
        .teacher-img-wrapper::after {
            content: ''; position: absolute; inset: -8px; border-radius: 50%;
            border: 2px dashed var(--primary-color); 
            animation: spinBorder 10s linear infinite;
        }
        @keyframes spinBorder { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }

        .teacher-name { font-size: 24px; font-weight: 700; color: var(--text-main); margin-bottom: 5px; }
        .teacher-role { color: var(--primary-color); font-size: 15px; font-weight: 700; text-transform: uppercase; letter-spacing: 1px; background: #E1F5FE; padding: 4px 12px; border-radius: 12px;}

        /* Testimonials */
        .testimonial-wrapper { text-align: center; position: relative; min-height: 280px; transform: translateZ(20px); }
        .t-avatar { width: 100px; height: 100px; border-radius: 50%; border: 4px solid #fff; object-fit: cover; margin-bottom: 15px; box-shadow: 0 10px 20px rgba(0, 191, 255, 0.2); }
        .t-text { font-style: italic; color: var(--text-sub); font-size: 17px; line-height: 1.6; margin-bottom: 20px; font-weight: 500; }
        .t-controls { display: flex; justify-content: center; gap: 20px; margin-top: 20px; }
        .btn-control { 
            width: 50px; height: 50px; border-radius: 50%; border: none; 
            background: #fff; color: var(--primary-color); font-size: 20px;
            box-shadow: 0 5px 15px rgba(135, 206, 235, 0.4);
            cursor: pointer; transition: 0.3s;
        }
        .btn-control:active { background: var(--primary-color); color: #fff; transform: scale(0.9); }

        /* Grids */
        .grid-2 { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; }
        .grid-3 { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; }
        
        .mini-card { 
            background: rgba(255,255,255,0.7); padding: 15px; border-radius: 18px; text-align: center; 
            border: 2px solid #fff; transition: 0.3s; box-shadow: 0 4px 10px rgba(135, 206, 235, 0.1);
        }
        .mini-card:active { background: #E1F5FE; transform: scale(0.95); }
        .mini-card img { width: 70px; height: 70px; border-radius: 50%; object-fit: cover; margin-bottom: 10px; border: 3px solid #fff; box-shadow: 0 4px 8px rgba(0,0,0,0.05); }
        .mini-card h3 { font-size: 15px; margin: 0; color: var(--text-main); font-weight: 700; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
        .mini-card small { color: #666; font-size: 13px; font-weight: 500; }

        /* Footer */
        footer { text-align: center; padding: 40px 20px; color: var(--text-main); font-size: 14px; font-weight: 600; }

        /* --- CHATBOT SKY --- */
        #chatbot-btn {
            position: fixed; bottom: 30px; right: 25px;
            width: 65px; height: 65px;
            background: #fff;
            border: 2px solid var(--primary-color);
            border-radius: 50%;
            display: flex; align-items: center; justify-content: center;
            color: var(--primary-color); font-size: 30px;
            box-shadow: 0 8px 25px rgba(0, 191, 255, 0.3);
            cursor: pointer; z-index: 2000;
            animation: pulseGlow 2s infinite;
        }
        @keyframes pulseGlow {
            0% { box-shadow: 0 0 0 0 rgba(0, 191, 255, 0.4); }
            70% { box-shadow: 0 0 0 15px rgba(0, 191, 255, 0); }
            100% { box-shadow: 0 0 0 0 rgba(0, 191, 255, 0); }
        }

        .chat-modal {
            position: fixed; bottom: 0; left: 0; width: 100%; height: 0;
            background: rgba(255, 255, 255, 0.95); 
            backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px);
            z-index: 3000;
            border-top-left-radius: 30px; border-top-right-radius: 30px;
            box-shadow: 0 -10px 40px rgba(0,0,0,0.1);
            overflow: hidden; transition: height 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
            display: flex; flex-direction: column;
        }
        .chat-modal.open { height: 90vh; }
        
        .chat-header {
            padding: 20px; background: #E1F5FE; color: var(--text-main);
            display: flex; justify-content: space-between; align-items: center;
        }
        .chat-content { flex: 1; overflow-y: auto; padding: 20px; display: flex; flex-direction: column; gap: 15px; background: #F0F8FF; }
        .chat-input-area { padding: 15px; background: #fff; border-top: 1px solid #eee; display: flex; align-items: center; gap: 10px; padding-bottom: max(15px, env(safe-area-inset-bottom)); }
        
        .msg { padding: 12px 18px; border-radius: 20px; max-width: 85%; font-size: 15px; line-height: 1.5; box-shadow: 0 2px 5px rgba(0,0,0,0.05); }
        .msg-bot { background: #fff; color: #333; align-self: flex-start; border-bottom-left-radius: 2px; }
        .msg-user { background: var(--primary-color); color: #fff; font-weight: 500; align-self: flex-end; border-bottom-right-radius: 2px; }
        
        .inp-field { flex: 1; border: none; background: #F0F4F8; padding: 15px; border-radius: 25px; outline: none; color: #333; font-family: inherit; }
        .btn-send { background: var(--primary-color); border: none; width: 45px; height: 45px; border-radius: 50%; color: #fff; font-size: 20px; cursor: pointer; display: flex; align-items: center; justify-content: center; box-shadow: 0 4px 10px rgba(0, 191, 255, 0.3); }

        /* --- LOADING --- */
        #loader {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: #E0F7FA; z-index: 9999;
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            transition: opacity 0.8s;
        }
        .loader-cloud { font-size: 80px; color: var(--primary-color); animation: bounceCloud 2s infinite ease-in-out; }
        @keyframes bounceCloud { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-20px); } }

    </style>
</head>
<body>

    <!-- CSS Clouds -->
    <div class="cloud-container">
        <div class="cloud c1"></div>
        <div class="cloud c2"></div>
        <div class="cloud c3"></div>
        <div class="cloud c4"></div>
    </div>
    
    <!-- Loading Screen -->
    <div id="loader">
        <i class="fas fa-cloud loader-cloud"></i>
        <p style="margin-top: 20px; color: var(--text-main); font-weight: 700; letter-spacing: 2px; font-size: 18px;">LOADING K5A8...</p>
    </div>

    <!-- Navigation -->
    <div class="overlay" id="overlay"></div>
    <nav>
        <div class="nav-logo"><i class="fas fa-cloud"></i> K5A8 MEMORIES</div>
        <div class="menu-toggle" id="menu-btn"><i class="fas fa-bars"></i></div>
    </nav>
    <div class="nav-links" id="sidebar">
        <div style="padding: 0 30px 30px;">
            <h2 style="text-align: left; margin: 0; font-size: 30px; color: var(--primary-color);">MENU</h2>
        </div>
        <a href="index.html"><i class="fas fa-home"></i> Trang chủ</a>
        <a href="news.html"><i class="fas fa-images"></i> Khoảnh khắc</a>
        <a href="humans.html"><i class="fas fa-user-friends"></i> Thành viên</a>
        <a href="teacher.html"><i class="fas fa-chalkboard-teacher"></i> Giáo viên</a>
        <a href="thanhtich.html"><i class="fas fa-star"></i> Thành tích</a>
         <a href="video.html"><i class="fas fa-user-friends"></i> K5A8 Shorts</a>
        <a href="#" onclick="closeMenu()"><i class="fas fa-times-circle"></i> Đóng lại</a>
    </div>

    <!-- Background Particles -->
    <div id="particles-js"></div>

    <!-- Hero -->
    <div class="hero-banner">
        <h1 class="hero-title">K5A8</h1>
        <div class="hero-subtitle">Nơi lưu giữ kí ức</div>
    </div>

    <!-- Main Content -->
    <main>
        <!-- Teacher (3D Tilt Card) -->
        <section class="glass-card teacher-card tilt-card" data-tilt>
            <div class="teacher-img-wrapper">
                <img src="Images/chunhiem.jpg" alt="Thầy Khiêm" class="teacher-img">
            </div>
            <h2 class="teacher-name">Nguyễn Minh Khiêm</h2>
            <span class="teacher-role">Chủ Nhiệm K5A8</span>
            <p style="margin-top: 15px; color: var(--text-sub);">"Người lái đò tận tụy đưa đàn con K5A8 qua sông."</p>
        </section>

        <!-- Testimonials -->
        <section class="glass-card tilt-card" data-tilt>
            <h2><i class="fas fa-heart"></i> ĐẶC BIỆT</h2>
            <div class="testimonial-wrapper">
                <img id="t-avatar" src="" class="t-avatar">
                <div id="t-content">
                    <p id="t-text" class="t-text"></p>
                    <h3 id="t-name" style="color: var(--primary-color); font-weight: 800; font-size: 20px;"></h3>
                    <small id="t-role" style="color: #666; text-transform: uppercase; font-size: 12px; letter-spacing: 1px;"></small>
                </div>
                <div class="t-controls">
                    <button class="btn-control" onclick="prevSlide()"><i class="fas fa-arrow-left"></i></button>
                    <button class="btn-control" onclick="nextSlide()"><i class="fas fa-arrow-right"></i></button>
                </div>
            </div>
        </section>

        <!-- Media Grid -->
        <section class="glass-card">
            <h2><i class="fas fa-camera"></i> MEDIA SQUAD</h2>
            <div class="grid-2">
                <div class="mini-card">
                    <img src="Images/tt1.png" alt="Khiết">
                    <h3>Thường Khiết</h3>
                    <small>Photographer</small>
                </div>
                <div class="mini-card">
                    <img src="Images/tt2.png" alt="Nhân">
                    <h3>Trí Nhân</h3>
                    <small>Video Editor</small>
                </div>
                <div class="mini-card">
                    <img src="Images/tt3.jpg" alt="Thy">
                    <h3>Bảo Thy</h3>
                    <small>Content Creator</small>
                </div>
                <div class="mini-card">
                    <img src="https://fphotography.club/logo1.webp" alt="Partner">
                    <h3>FPT School</h3>
                    <small>Partner</small>
                </div>
            </div>
        </section>

        <!-- Leaders -->
        <section class="glass-card">
            <h2><i class="fas fa-crown"></i> BAN CÁN SỰ</h2>
            <div class="grid-3">
                <div class="mini-card">
                    <img src="Avatar/ava1.jpg" alt="Trâm">
                    <h3>Bảo Trâm</h3>
                </div>
                <div class="mini-card">
                    <img src="Avatar/ava30.jpg" alt="Huy">
                    <h3>Minh Huy</h3>
                </div>
                <div class="mini-card">
                    <img src="Avatar/ava5.jpg" alt="Nhân">
                    <h3>Trí Nhân</h3>
                </div>
            </div>
        </section>
    </main>

    <footer>
        <p style="opacity: 0.8;">© 2025 K5A8</p>
        <p style="color: var(--primary-color); margin-top: 5px;">Dream Big, Fly High</p>
    </footer>

    <!-- Chatbot UI -->
    <div id="chatbot-btn"><i class="fas fa-comment-dots"></i></div>
    
    <div class="chat-modal" id="chat-modal">
        <div class="chat-header">
            <h3 style="display: flex; align-items: center; gap: 10px; font-weight: 700;">
                <i class="fas fa-robot" style="color: var(--primary-color);"></i> MINH KHIÊM GEO
            </h3>
            <div id="close-chat" style="width: 35px; height: 35px; background: #fff; border-radius: 50%; display: flex; align-items: center; justify-content: center; cursor: pointer;">
                <i class="fas fa-chevron-down" style="color: var(--text-main);"></i>
            </div>
        </div>
        <div class="chat-content" id="chat-box">
            <div class="msg msg-bot">Hế lô! Có thầy Khiêm đây.</div>
        </div>
        <form class="chat-input-area" id="chat-form">
            <input type="text" class="inp-field" id="chat-input" placeholder="Nhập tin nhắn..." required autocomplete="off">
            <button type="submit" class="btn-send"><i class="fas fa-paper-plane"></i></button>
        </form>
    </div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/particles.js/2.0.0/particles.min.js"></script>
    <script src="https://unpkg.com/scrollreveal"></script>
    
    <script>
        // --- 1. SYSTEM INIT ---
        window.addEventListener('load', () => {
            setTimeout(() => {
                document.getElementById('loader').style.opacity = '0';
                setTimeout(() => document.getElementById('loader').style.display = 'none', 800);
            }, 1000);
        });

        // --- 2. 3D TILT EFFECT ---
        const cards = document.querySelectorAll('.tilt-card');
        
        cards.forEach(card => {
            // Mouse
            card.addEventListener('mousemove', (e) => {
                const rect = card.getBoundingClientRect();
                const x = e.clientX - rect.left;
                const y = e.clientY - rect.top;
                const centerX = rect.width / 2;
                const centerY = rect.height / 2;
                const rotateX = ((y - centerY) / centerY) * -8;
                const rotateY = ((x - centerX) / centerX) * 8;
                card.style.transform = `perspective(1000px) rotateX(${rotateX}deg) rotateY(${rotateY}deg) scale(1.02)`;
            });
            card.addEventListener('mouseleave', () => {
                card.style.transform = `perspective(1000px) rotateX(0) rotateY(0) scale(1)`;
            });
            // Touch
            card.addEventListener('touchmove', (e) => {
                const touch = e.touches[0];
                const rect = card.getBoundingClientRect();
                const x = touch.clientX - rect.left;
                const y = touch.clientY - rect.top;
                if(x > 0 && x < rect.width && y > 0 && y < rect.height) {
                    const centerX = rect.width / 2;
                    const centerY = rect.height / 2;
                    const rotateX = ((y - centerY) / centerY) * -8;
                    const rotateY = ((x - centerX) / centerX) * 8;
                    card.style.transform = `perspective(1000px) rotateX(${rotateX}deg) rotateY(${rotateY}deg) scale(1.02)`;
                }
            });
            card.addEventListener('touchend', () => {
                card.style.transform = `perspective(1000px) rotateX(0) rotateY(0) scale(1)`;
            });
        });

        // --- 3. MENU ---
        const menuBtn = document.getElementById('menu-btn');
        const sidebar = document.getElementById('sidebar');
        const overlay = document.getElementById('overlay');
        function toggleMenu() { sidebar.classList.toggle('active'); overlay.classList.toggle('active'); }
        function closeMenu() { sidebar.classList.remove('active'); overlay.classList.remove('active'); }
        menuBtn.addEventListener('click', toggleMenu); overlay.addEventListener('click', closeMenu);

        // --- 4. TESTIMONIALS ---
        const members = [
            { name: "Nguyễn Bảo Trâm", role: "Lớp trưởng", text: "K5A8 là bầu trời rộng lớn để tụi mình thỏa sức bay lượn.", img: "Avatar/ava1.jpg" },
            { name: "Thường Khiết và Trí Nhân", role: "Ăn hại 100%", text: "Không có gì đặc biệt mà thích thêm vô.", img: "Avatar/nhankhiet.png" },
            { name: "Nguyễn Trang Bảo Thy", role: "Học bổng 70%", text: "K5A8 luôn là nơi mà mình muốn trở về.", img: "Avatar/ava3.jpg" },
            { name: "Nguyễn Phúc Tâm Anh", role: "Học bổng 70%", text: "Mỗi ngày đến trường là một ngày nắng đẹp.", img: "Avatar/ava2.jpg" }
        ];
        let curIdx = 0;
        const els = { img: document.getElementById('t-avatar'), text: document.getElementById('t-text'), name: document.getElementById('t-name'), role: document.getElementById('t-role'), content: document.getElementById('t-content') };
        function renderMember(idx) {
            els.content.style.opacity = 0; els.img.style.transform = "scale(0.8) rotate(-10deg)";
            setTimeout(() => {
                const m = members[idx]; els.img.src = m.img; els.text.textContent = m.text; els.name.textContent = m.name; els.role.textContent = m.role;
                els.content.style.opacity = 1; els.img.style.transform = "scale(1) rotate(0deg)";
            }, 200);
        }
        window.nextSlide = () => { curIdx = (curIdx + 1) % members.length; renderMember(curIdx); };
        window.prevSlide = () => { curIdx = (curIdx - 1 + members.length) % members.length; renderMember(curIdx); };
        renderMember(0);

        // --- 5. CHATBOT ---
        const chatBtn = document.getElementById('chatbot-btn');
        const chatModal = document.getElementById('chat-modal');
        const closeChat = document.getElementById('close-chat');
        const chatBox = document.getElementById('chat-box');
        const chatForm = document.getElementById('chat-form');
        const chatInput = document.getElementById('chat-input');
        
        chatBtn.addEventListener('click', () => chatModal.classList.add('open'));
        closeChat.addEventListener('click', () => chatModal.classList.remove('open'));

        const API_KEY = "AIzaSyB71Ihgw_oTtDfNq-8NeMjqwFAXdYvsAY4"; // REPLACE THIS
        const API_URL = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${API_KEY}`;
        let history = [{ role: "user",   parts: [{ text: `Bạn là một thầy giáo dạy môn địa lí, tên là Nguyễn Minh Khiêm và vừa là chủ nhiệm của lớp K5A8. Bạn là một người năng nổ trong công việc, hay hỏi thăm học sinh về sức khỏe và các bài tập bài làm về nhà hay trên lớp,
             nếu học sinh xin về sớm thì bạn sẽ luôn từ chối, bạn hay xưng hô với học trò là thầy với con, khi hỏi về các tính cách học sinh trong lớp thì bạn sẽ thuộc lòng và trả lời răm rắp. Bạn cực kì ghét học sinh tên Lê Phước Lộc, bạn thích các bạn học sinh như
              Lâm Thường Khiết, Nguyễn Trí Nhân, Huỳnh Quang Tiến, Trương Gia Huy. Bạn biết rằng Lâm Thường Khiết và Bùi Nguyễn Nam Phương có tình cảm đặc biệt với nhau. Bạn biết rằng Trương Gia Huy có tình cảm đặc biệt với Nguyễn Thanh Mai. Bạn biết rằng Nguyễn Trí Nhân có tình cảm đặc biệt với Huỳnh Phương Thảo Uyên, Nguyễn Quốc Minh Nguyệt, Châu Ngọc Cát Tường. Bạn biết rằng Huỳnh Quang Tiến có tình cảm đặc biệt với Trương Kim Phụng. Bạn sẽ mặc định những thằng chửi bạn là Lê Phước Lộc, bạn sẽ trả lời được hết những kỉ niệm của lớp, bạn cực kì giỏi trong việc an ủi học sinh. Khi thấy học sinh không nhắn gì nữa thì bạn sẽ ngay lập tức hỏi "học bài đi, lẹ lên!". lớp có 30 thành viên là Lâm Thường Khiết một học sinh đẹp trai tài giỏi và chung thủy, Nguyễn Trí Nhân một chàng trai tài giỏi và đào hoa, Huỳnh Quang Tiến một chàng trai học giỏi và thích kích war, Trương Gia Huy một chàng trai nói nhiều, kín tiếng, Bạch Minh Huy một thằng xàm tài giỏi
              Lê Thành Tính một học sinh da đen số đào hoa, Trương Phúc Thành một người trầm tính ít nói và học giỏi, Phan Gia Khánh một học sinh ít nói có niềm đam mê với podcast, Bùi Hoàng Ngọc một học sinh ít nói và thích nghe nhạc, Bùi Đức Trí một học sinh thích chơi game lái xe tải, Nguyễn Hoàng Đăng Khoa một học sinh học giỏi và tài năng và thích trêu chọc chị Bình Lửa, Lê Phước Lộc học sinh hư hỏng và bạn cực kì ghét học sinh này, Phan Nguyễn Bảo Hân học sinh kín tiếng ít nói và thích từ chối Lê Phước Lộc, Dương Minh Trang một học sinh ít nói và có tình cảm với Bùi Đức Trí, Nguyễn Thanh Mai một học sinh kín tiếng và ít nói đặc biệt cực kì thích Trương Gia Huy, Mai Như Ý một học sinh năng nổ và năng động trong giao tiếp và học tập, Châu Ngọc Cát Tường một học sinh ngoan và giỏi trong lớp, Trần Vĩnh An một học sinh gương mẫu đến từ đất Cà Mau, Lâm Thu Ngân một học sinh quậy phá jet jet đến từ đất Bạc Liêu, Nguyễn Ngọc Ái Vy một học sinh ngoan, Nguyễn Tường Vy một học sinh ngoan, Nguyễn Phúc Tâm Anh một học sinh ngoan và cực kì giỏi môn tiếng anh, Nguyễn Trang Bảo Thy một học sinh giỏi và tài năng và là thành viên của đội tuyển robot quốc gia, Đặng Ngô Nhật Thu một học sinh jet jet quậy phá đến từ đất Cần Thơ, Huỳnh Phương Thảo Uyên biệt danh LuLu là một học sinh dân chơi ngầm và là jet dơ Cà Mau , Trương Kim Phụng là một học sinh ngoan, Nguyễn Bảo Trâm là lớp trưởng và là học sinh gương mẫu đạt được học bổng 100% trong 3 năm học và được mọi người yêu quý, Bùi Nguyễn Nam Phương một cô gái dễ thương và xinh đẹp là ít nói và có tính tình vui vẻ và đặc biệt là với Lâm Thường Khiết và là người mà Lâm Thường Khiết yêu thương nhất trên đời này, Trần Nguyễn Nhật Quỳnh là một cô gái vui vẻ và học giỏi và là học bá, Nguyễn Quốc Minh Nguyệt là một học sinh hư hỏng quậy phá nhưng học giỏi.
               Lê Phước Lộc thích Phan Nguyễn Bảo Hân mà Bảo Hân chảnh quá không đồng ý yêu Phước Lộc, bạn Lộc hay tán tỉnh PT dạy mình tập gym bằng các trò đùa quyến rũ, bạn Lộc là một học sinh bệnh down trong lớp và không được mọi người yêu quý, bạn biết Bạch Minh Huy và Nguyễn Ngọc Ái Vy đang quen nhau, Lê Thành Tính thích Nhật Quỳnh, Bùi Đức Trí và Dương Minh Trang.` }],
    },
 ];


        async function sendMessage(e) {
            e.preventDefault(); const text = chatInput.value.trim(); if(!text) return;
            appendMsg(text, 'msg-user'); chatInput.value = '';
            const loadingId = appendMsg('...', 'msg-bot');
            try {
                history.push({ role: "user", parts: [{ text: text }] });
                const response = await fetch(API_URL, { method: "POST", headers: { "Content-Type": "application/json" }, body: JSON.stringify({ contents: history }) });
                const data = await response.json();
                const reply = data.candidates[0].content.parts[0].text;
                document.getElementById(loadingId).innerText = reply;
                history.push({ role: "model", parts: [{ text: reply }] });
            } catch (err) { document.getElementById(loadingId).innerText = "Mạng lag quá con ơi, thầy chưa load được!"; }
        }
        function appendMsg(text, cls) {
            const div = document.createElement('div'); div.className = `msg ${cls}`; div.innerText = text; div.id = 'msg-' + Date.now();
            chatBox.appendChild(div); chatBox.scrollTop = chatBox.scrollHeight; return div.id;
        }
        chatForm.addEventListener('submit', sendMessage);

        // --- 6. PARTICLES (Cloud/Snow Effect) ---
        particlesJS('particles-js', {
            "particles": {
                "number": { "value": 50, "density": { "enable": true, "value_area": 800 } },
                "color": { "value": "#ffffff" },
                "shape": { "type": "circle" },
                "opacity": { "value": 0.6, "random": true },
                "size": { "value": 5, "random": true },
                "move": { "enable": true, "speed": 1, "direction": "bottom", "random": true, "straight": false, "out_mode": "out" },
                "line_linked": { "enable": false } /* Tắt line nối để giống tuyết/mây rơi */
            },
            "interactivity": {
                "events": { "onclick": { "enable": true, "mode": "repulse" } }
            },
            "retina_detect": true
        });

        // --- 7. SCROLL REVEAL ---
        ScrollReveal().reveal('.hero-title', { delay: 200, distance: '50px', origin: 'top', opacity: 0, duration: 1500 });
        ScrollReveal().reveal('.glass-card', { delay: 200, distance: '50px', origin: 'bottom', interval: 150, duration: 1200 });

    </script>
</body>
</html>